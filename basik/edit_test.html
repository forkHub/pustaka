<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>JS Editor with Dialog</title>
	<style>
		body {
			font-family: sans-serif;
			margin: 20px;
		}

		textarea {
			width: 100%;
			height: 300px;
			margin-bottom: 10px;
		}

		input[type="text"] {
			width: 300px;
		}

		button {
			margin: 5px;
		}

		dialog {
			border: none;
			border-radius: 8px;
			padding: 20px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
			max-width: 400px;
		}

		ul {
			list-style: none;
			padding: 0;
		}

		li {
			margin: 5px 0;
		}

		.entry-item {
			display: flex;
			align-items: center;
			gap: 10px;
		}

		.entry-name {
			font-weight: bold;
		}
	</style>
</head>

<body>
	<h2>Simple JavaScript Editor</h2>
	<textarea id="editor" placeholder="Write something..."></textarea><br>

	<input type="text" id="entryName" placeholder="Entry name" />
	<button onclick="saveEntry()">üíæ Save</button>
	<button onclick="downloadEntry()">‚¨áÔ∏è Download</button>
	<input type="file" id="uploadFile" onchange="uploadEntry()" />
	<button onclick="entryDialog.showModal()">üìã Show Saved Entries</button>

	<dialog id="entryDialog">
		<h3>Saved Entries</h3>
		<ul id="entryList"></ul>
		<button onclick="entryDialog.close()">‚ùå Close</button>
	</dialog>

	<script>
		const editor = document.getElementById('editor');
		const entryName = document.getElementById('entryName');
		const entryList = document.getElementById('entryList');
		const entryDialog = document.getElementById('entryDialog');

		function refreshList() {
			entryList.innerHTML = '';
			Object.keys(localStorage).forEach(key => {
				const li = document.createElement('li');
				li.className = 'entry-item';

				const nameSpan = document.createElement('span');
				nameSpan.textContent = key;
				nameSpan.className = 'entry-name';

				const loadBtn = document.createElement('button');
				loadBtn.textContent = 'üìÇ Load';
				loadBtn.onclick = () => {
					editor.value = localStorage.getItem(key);
					entryName.value = key;
					entryDialog.close();
				};

				const deleteBtn = document.createElement('button');
				deleteBtn.textContent = 'üóëÔ∏è Delete';
				deleteBtn.onclick = () => {
					localStorage.removeItem(key);
					refreshList();
					alert("Deleted!");
				};

				li.appendChild(nameSpan);
				li.appendChild(loadBtn);
				li.appendChild(deleteBtn);
				entryList.appendChild(li);
			});
		}

		function saveEntry() {
			const name = entryName.value.trim();
			if (!name) return alert("Please enter a name.");
			if (localStorage.getItem(name)) return alert("Name already exists. Choose another.");
			localStorage.setItem(name, editor.value);
			refreshList();
			alert("Saved!");
		}

		function downloadEntry() {
			const name = entryName.value.trim() || "untitled";
			const blob = new Blob([editor.value], { type: "text/plain" });
			const link = document.createElement("a");
			link.href = URL.createObjectURL(blob);
			link.download = name + ".txt";
			link.click();
		}

		function uploadEntry() {
			const file = document.getElementById('uploadFile').files[0];
			if (!file) return;
			const reader = new FileReader();
			reader.onload = function (e) {
				editor.value = e.target.result;
				entryName.value = file.name.replace(/\.[^/.]+$/, "");
			};
			reader.readAsText(file);
		}

		refreshList();
	</script>
</body>

</html>